<div class="categorias-container">
  <h2>Categorías del Asociado</h2>

  <div *ngIf="bloqcat.length > 0; else noData" class="cards-container">
    <div class="card" *ngFor="let categoria of bloqcat" (click)="openModal(categoria)">
      <img [src]="getIconUrl(categoria.grupo)" alt="{{ categoria.grupo }}" class="icon">
      <h3>{{ categoria.grupo }}</h3>
      <p>{{ categoria.descripcionGrupo }}</p>
    </div>
  </div>

  <ng-template #noData>
    <p>No se encontraron categorías.</p>
  </ng-template>
</div>

<!-- Modal para el formulario de producción -->
<div class="modal" *ngIf="showFormularioProduccion" (click)="closeFormularioProduccion()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <span class="close" (click)="closeFormularioProduccion()">&times;</span>
    <h2>Formulario de Producción</h2>

    <div class="formulario-container">
      <form (ngSubmit)="submitFormulario()">
        <div class="form-group">
          <label for="idProducto">Producto:</label>
          <select id="idProducto" [(ngModel)]="productoSeleccionado" name="idProducto" required>
            <option *ngFor="let producto of filteredProductos" [value]="producto.idProducto">{{ producto.producto }}</option>
          </select>
        </div>

        <div class="form-group">
          <label for="fechaInicio">Fecha Inicio Producción</label>
          <input type="date" id="fechaInicio" [(ngModel)]="respuestasFormulario.fechaInicio" name="fechaInicio" required />
        </div>

        <div class="form-group">
          <label for="fechaFin">Fecha Fin Producción</label>
          <input type="date" id="fechaFin" [(ngModel)]="respuestasFormulario.fechaFin" name="fechaFin" required />
        </div>

        <div class="form-group">
          <label for="cantidad">¿Cuántas hectáreas va a cultivar?</label>
          <input type="number" id="cantidad" [(ngModel)]="respuestasFormulario.cantidad" name="cantidad" required />
        </div>

        <div class="form-group">
          <label for="esperado">Producción Esperada</label>
          <input type="number" id="esperado" [(ngModel)]="respuestasFormulario.esperado" name="esperado" required/>
        </div>

        <div class="form-group">
          <label for="unidad">Unidad de medida</label>
          <input type="text" id="unidad" [(ngModel)]="respuestasFormulario.unidad" name="unidad" placeholder="Ingrese en plural el nombre de unidad de medida de la producción" required />
        </div>

        <div class="form-group">
          <label for="descripcion">Descripción</label>
          <input type="text" id="descripcion" [(ngModel)]="respuestasFormulario.descripcion" name="descripcion" placeholder="Ingrese un texto descriptivo para identificar esta hoja de costos" required />
        </div>

        <button type="submit" class="btn-primary">Guardar</button>
      </form>
    </div>
  </div>
</div>
